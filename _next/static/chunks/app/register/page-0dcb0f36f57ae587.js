(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1242:(e,t,r)=>{Promise.resolve().then(r.bind(r,6616))},3405:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155),a=r(7600),l=r(5695),n=r(2115);function i(e){let{children:t}=e,{user:r,loading:i}=(0,a.A)(),u=(0,l.useRouter)();return((0,n.useEffect)(()=>{!i&&r&&u.push("/profile")},[r,i]),i)?null:(0,s.jsx)(s.Fragment,{children:!r&&t})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(3405),l=r(5695),n=r(2115),i=r(3568),u=r(7376),o=r.n(u);function c(){let e=(0,l.useRouter)(),[t,r]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[m,_]=(0,n.useState)(""),f=async r=>{r.preventDefault(),p(""),_("");try{let r=await fetch("https://localhost:7026/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:u,password:d})});if(!r.ok){let e=await r.json();p(e.message||"Registration failed"),i.Ay.error(e.message||"Registration failed.");return}i.Ay.success("Account created successfully!"),e.push("/login")}catch(e){console.error(e),p("Network error."),i.Ay.error("Network error.")}};return(0,s.jsx)(a.A,{children:(0,s.jsx)("div",{className:o().container,children:(0,s.jsxs)("form",{className:o().registerBox,onSubmit:f,children:[(0,s.jsx)("h2",{className:o().title,children:"Register"}),(0,s.jsxs)("div",{className:o().formGroup,children:[(0,s.jsx)("label",{className:o().label,children:"Name"}),(0,s.jsx)("input",{className:o().input,type:"text",required:!0,value:t,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{className:o().formGroup,children:[(0,s.jsx)("label",{className:o().label,children:"Email"}),(0,s.jsx)("input",{className:o().input,type:"email",required:!0,value:u,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:o().formGroup,children:[(0,s.jsx)("label",{className:o().label,children:"Password"}),(0,s.jsx)("input",{className:o().input,type:"password",required:!0,value:d,onChange:e=>h(e.target.value)})]}),(0,s.jsx)("button",{className:o().button,type:"submit",children:"Register"}),g&&(0,s.jsx)("p",{className:o().error,children:g}),m&&(0,s.jsx)("p",{className:o().success,children:m}),(0,s.jsxs)("p",{className:o().link,children:["Already have an account? ",(0,s.jsx)("a",{href:"/login",children:"Log in"})]})]})})})}},7376:e=>{e.exports={container:"register_container__ZDvLI",registerBox:"register_registerBox__ggOVm",title:"register_title__sRyfD",formGroup:"register_formGroup__qYZWe",label:"register_label__pMcEn",input:"register_input__3xGuf",button:"register_button__BA9bk",error:"register_error__bbkN4",success:"register_success__a7O0n",link:"register_link__8HFRy"}},7600:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>i});var s=r(5155),a=r(8840),l=r(2115);let n=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[u,o]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(t&&e)try{(0,a.H)(t)?localStorage.clear():i(JSON.parse(e))}catch(e){localStorage.clear()}o(!1)},[]),(0,s.jsx)(n.Provider,{value:{user:r,setUser:i,logout:()=>{localStorage.clear(),i(null)},loading:u},children:t})}function u(){let e=(0,l.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8840:(e,t,r)=>{"use strict";function s(e){try{let t=JSON.parse(atob(e.split(".")[1])),r=1e3*t.exp;return Date.now()>=r}catch(e){return!0}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4;try{let r=JSON.parse(atob(e.split(".")[1])),s=1e3*r.exp,a=Date.now();return s-a<t}catch(e){return!0}}r.d(t,{H:()=>s,n:()=>a})}},e=>{var t=t=>e(e.s=t);e.O(0,[675,568,441,684,358],()=>t(1242)),_N_E=e.O()}]);