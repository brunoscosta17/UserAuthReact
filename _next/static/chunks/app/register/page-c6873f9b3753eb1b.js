(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1242:(e,t,r)=>{Promise.resolve().then(r.bind(r,6616))},3405:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155),a=r(7600),l=r(5695),n=r(2115);function i(e){let{children:t}=e,{user:r,loading:i}=(0,a.A)(),o=(0,l.useRouter)();return((0,n.useEffect)(()=>{!i&&r&&o.push("/profile")},[r,i]),i)?null:(0,s.jsx)(s.Fragment,{children:!r&&t})}},6616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(3405),l=r(6874),n=r.n(l),i=r(2115),o=r(3568),c=r(7376),u=r.n(c);function h(){let[e,t]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),[c,h]=(0,i.useState)(""),[d,g]=(0,i.useState)(""),[p,m]=(0,i.useState)(""),_=async t=>{t.preventDefault(),g(""),m("");try{let t=await fetch("https://localhost:7026/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,password:c})});if(!t.ok){let e=await t.json();g(e.message||"Registration failed"),o.Ay.error(e.message||"Registration failed.");return}o.Ay.success("Account created successfully!"),window.location.href="/UserAuthReact/login"}catch(e){console.error(e),g("Network error."),o.Ay.error("Network error.")}};return(0,s.jsx)(a.A,{children:(0,s.jsx)("div",{className:u().container,children:(0,s.jsxs)("form",{className:u().registerBox,onSubmit:_,children:[(0,s.jsx)("h2",{className:u().title,children:"Register"}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Name"}),(0,s.jsx)("input",{className:u().input,type:"text",required:!0,value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Email"}),(0,s.jsx)("input",{className:u().input,type:"email",required:!0,value:r,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Password"}),(0,s.jsx)("input",{className:u().input,type:"password",required:!0,value:c,onChange:e=>h(e.target.value)})]}),(0,s.jsx)("button",{className:u().button,type:"submit",children:"Register"}),d&&(0,s.jsx)("p",{className:u().error,children:d}),p&&(0,s.jsx)("p",{className:u().success,children:p}),(0,s.jsxs)("p",{className:u().link,children:["Already have an account? ",(0,s.jsx)(n(),{href:"/UserAuthReact/login",children:"Log in"})]})]})})})}},7376:e=>{e.exports={container:"register_container__ZDvLI",registerBox:"register_registerBox__ggOVm",title:"register_title__sRyfD",formGroup:"register_formGroup__qYZWe",label:"register_label__pMcEn",input:"register_input__3xGuf",button:"register_button__BA9bk",error:"register_error__bbkN4",success:"register_success__a7O0n",link:"register_link__8HFRy"}},7600:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,AuthProvider:()=>i});var s=r(5155),a=r(8840),l=r(2115);let n=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(t&&e)try{(0,a.H)(t)?localStorage.clear():i(JSON.parse(e))}catch(e){localStorage.clear()}c(!1)},[]),(0,s.jsx)(n.Provider,{value:{user:r,setUser:i,logout:()=>{localStorage.clear(),i(null)},loading:o},children:t})}function o(){let e=(0,l.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8840:(e,t,r)=>{"use strict";function s(e){try{let t=JSON.parse(atob(e.split(".")[1])),r=1e3*t.exp;return Date.now()>=r}catch(e){return!0}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4;try{let r=JSON.parse(atob(e.split(".")[1])),s=1e3*r.exp,a=Date.now();return s-a<t}catch(e){return!0}}r.d(t,{H:()=>s,n:()=>a})}},e=>{var t=t=>e(e.s=t);e.O(0,[675,568,244,441,684,358],()=>t(1242)),_N_E=e.O()}]);